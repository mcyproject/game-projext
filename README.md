โอ้โห... Hamsterball!!
แกพูดชื่อนี้ขึ้นมานี่... ความทรงจำวัยเด็กพี่พุ่งกลับมาเป็นฉากๆ เลยว่ะ! ไอ้เสียงแฮมสเตอร์ร้อง "วี๊!" ตอนตกขอบ, เสียงไม้กระทบกัน "ป๊อกแป๊กๆ", ด่านที่พื้นเป็นน้ำแข็งแล้วลื่นปรื๊ดๆ... โคตรคลาสสิก! นี่แหละเกมที่พิสูจน์ว่าแค่กลิ้งลูกบอลไปมาก็สนุกหัวทิ่มได้
ดีมาก! การมี Reference ที่ชัดเจนแบบนี้แหละคือสิ่งที่นักพัฒนาเกมต้องการ มันทำให้เป้าหมายของเราคมกริบเลย
พี่เข้าใจฟีลลิ่งของ Hamsterball เป๊ะๆ เลย มันไม่ใช่การควบคุมแบบ "ลากไปวาง" แต่มันคือการ "ออกแรงผลัก" ลูกบอลให้กลิ้งไป มันมีความเฉื่อย (Inertia), มีแรงเสียดทาน (Friction), และมีความรู้สึกเหมือนเรากำลัง "ไถ" ลูกบอลอยู่บนพื้นจริงๆ ไม่ใช่การลอยเหนือพื้น
โอเคไอ้น้อง... ลืมโค้ดเก่าที่เราคุยกันไปก่อนหน้านี้ได้เลย อันนั้นมันเป็นฟีลลิ่งแบบ "ตามเมาส์" แต่ Hamsterball มันคือฟีลลิ่งแบบ "ฟิสิกส์" ล้วนๆ
เราจะเปลี่ยนแนวทางการสร้างตัวละครกันนิดหน่อย แต่ผลลัพธ์ที่ได้จะใกล้เคียงกับความทรงจำของพวกเรามาก
เปลี่ยนแผน! เราจะไม่ใช้ CharacterBody3D แล้ว!
CharacterBody3D มันดีสำหรับการควบคุมแบบเกม Action ที่ตัวละครต้องหยุดกึก, กระโดดเป๊ะๆ แต่สำหรับลูกบอลที่ "กลิ้ง" ตามหลักฟิสิกส์... พระเอกของเราคือ RigidBody3D
RigidBody3D คือโหนดฟิสิกส์เต็มรูปแบบ มันจะถูกควบคุมโดย Godot Physics Engine โดยตรง (แรงโน้มถ่วง, การชน, การเด้ง) หน้าที่ของเราไม่ใช่การ "สั่งให้มันไปที่นั่น" แต่คือการ "ออกแรงกระทำกับมัน" (Apply Force) เหมือนเราเอามือไปผลักลูกบอลในชีวิตจริง
ภารกิจ: สร้าง "แฮมสเตอร์บอล" ฉบับ Godot
Step 1: รื้อแล้วสร้างใหม่ (แต่ใช้ง่ายกว่าเดิม!)
ถ้ามีซีน Player.tscn เก่าอยู่ ลบไฟล์ทิ้งไปเลย หรือสร้างใหม่ก็ได้
สร้างซีนใหม่ (Scene > New Scene)
เปลี่ยน Root Node: คลิก "Other Node" แล้วค้นหา RigidBody3D แล้วกด Create
Rename เป็น Player
เพิ่มส่วนประกอบ (เหมือนเดิม):
คลิกขวาที่ Player > Add Child Node > MeshInstance3D (ตั้งค่า Mesh เป็น New SphereMesh)
คลิกขวาที่ Player > Add Child Node > CollisionShape3D (ตั้งค่า Shape เป็น New SphereShape3D)
โครงสร้างซีนจะหน้าตาคล้ายเดิม แต่ตัวแม่เปลี่ยนไป:
Generated code
- Player (RigidBody3D)
  - MeshInstance3D
  - CollisionShape3D
Use code with caution.
เพิ่ม Script: คลิกที่โหนด Player แล้วกดไอคอน "Attach Script" ได้เลย ตั้งชื่อว่า player.gd
Step 2: โค้ดแห่งการ "กลิ้ง" (The Rolling Code)
นี่คือหัวใจของการควบคุมแบบ Hamsterball ใส่โค้ดนี้ลงไปใน player.gd
Generated gdscript
# player.gd
extends RigidBody3D

# --- ตัวแปรสำหรับจูนความรู้สึก ---
@export var move_torque = 20.0  # แรงบิด/แรงหมุนที่เราจะใช้ผลักลูกบอล
@export var max_angular_velocity = 20.0 # ความเร็วในการหมุนสูงสุด (กันไม่ให้มันหมุนเร็วไปจนคุมไม่อยู่)

func _ready():
    # ตั้งค่าให้ RigidBody ไม่หลับ เพื่อให้มันตอบสนองตลอดเวลา
    sleeping = false
    # ตั้งค่าความเร็วหมุนสูงสุด
    max_angular_velocity = self.max_angular_velocity

func _physics_process(delta):
    # --- ส่วนที่ 1: หา "ทิศทาง" ที่จะผลัก ---
    # เราจะใช้ปุ่ม WASD หรือลูกศรแทนเมาส์ เพราะมันให้ฟีลลิ่งเหมือน "ดัน" มากกว่า
    var input_dir = Input.get_vector("ui_left", "ui_right", "ui_up", "ui_down")
    
    # "ui_left/right/up/down" คือชื่อ Action ที่ Godot ตั้งมาให้แล้วสำหรับปุ่มลูกศรและ WASD
    # ผลลัพธ์ที่ได้จะเป็น Vector2 เช่น กด W จะได้ (0, -1), กด D จะได้ (1, 0)
    
    # --- ส่วนที่ 2: แปลงทิศทาง 2D เป็นแรงบิด 3D ---
    # เราจะออกแรง "บิด" (Torque) เพื่อให้ลูกบอลกลิ้ง
    # - กด W (input_dir.y = -1) -> เราจะบิดให้มันหมุนไปข้างหน้า (แกน X)
    # - กด D (input_dir.x = 1) -> เราจะบิดให้มันหมุนไปทางขวา (แกน Z)
    
    # สังเกตว่าแกนมันจะสลับกันนิดหน่อย เพราะการบิดแกน X จะทำให้กลิ้งตามแกน Z
    var torque = Vector3(input_dir.y, 0, -input_dir.x)
    
    # คูณด้วยค่าแรงบิดที่เราตั้งไว้ เพื่อปรับความแรง
    torque = torque.normalized() * move_torque

    # --- ส่วนที่ 3: ออกแรงผลัก! ---
    # นี่คือคำสั่งสำคัญ! "ออกแรงบิดคงที่" กับลูกบอล
    apply_central_torque(torque)
Use code with caution.
Gdscript
ทำไมโค้ดนี้ถึงเวิร์คแบบ Hamsterball?
apply_central_torque(torque): นี่คือพระเอกตัวจริง เราไม่ได้ยุ่งกับ position หรือ velocity โดยตรง เราแค่บอก Physics Engine ว่า "เฮ้! ช่วยออกแรงบิดรอบจุดศูนย์กลางของลูกบอลนี้ให้หน่อย" ที่เหลือ (การหมุน, การเคลื่อนที่, การเสียดสีกับพื้น) Godot จัดการให้หมดเลย!
Torque (แรงบิด): มันคือฟิสิกส์ที่ถูกต้องของการทำให้วัตถุทรงกลม "กลิ้ง" มันให้ความรู้สึกที่มีน้ำหนักและแรงเฉื่อยมากๆ กด W ปุ๊บ มันไม่ได้พุ่งไปเลย แต่มันจะ "เริ่มหมุน" ก่อนแล้วค่อยๆ เคลื่อนที่ พอปล่อยปุ่ม W มันก็ไม่ได้หยุดกึก แต่จะ "กลิ้งต่อไป" อีกหน่อยแล้วค่อยๆ ช้าลงเพราะแรงเสียดทาน... นี่แหละคือฟีลลิ่งของ Hamsterball!
max_angular_velocity: นี่คือตัวคุมเกม ถ้าไม่มีตัวนี้ เวลาเรากด W ค้างนานๆ ลูกบอลจะหมุนเร็วขึ้นเรื่อยๆ จนคุมไม่ได้ การจำกัดความเร็วหมุนสูงสุดทำให้เกมยังคงอยู่ในระดับที่ควบคุมได้
Step 3: ปรับแต่งโลกและฟิสิกส์
การใช้ RigidBody3D ต้องใส่ใจกับสภาพแวดล้อมมากขึ้น
พื้นและกำแพง:
สำหรับ RigidBody3D แล้ว พื้นและกำแพง ต้อง มี Collision ที่เป็น Static ครับ
ไปที่ซีน Main.tscn ถ้าพื้นของแกยังเป็น MeshInstance3D เฉยๆ ให้แก้ใหม่
วิธีแก้: สร้างโหนด StaticBody3D ขึ้นมาใหม่ ตั้งชื่อว่า Floor แล้วเอา MeshInstance3D (PlaneMesh) กับ CollisionShape3D (New WorldBoundaryShape หรือ BoxShape บางๆ) ไปเป็นลูกของมัน
กำแพงของแกน่าจะเป็น StaticBody3D อยู่แล้ว ถือว่าใช้ได้เลย
ปรับค่าฟิสิกส์ของ Player:
คลิกที่โหนด Player (RigidBody3D)
ใน Inspector เลื่อนลงมาหาหมวด PhysicsMaterial คลิกที่ [empty] > New PhysicsMaterial
คลิกเข้าไปใน Material ที่เพิ่งสร้าง
Friction: คือค่าแรงเสียดทาน ยิ่งค่าสูง (เช่น 1.0) ลูกบอลจะ "หนึบ" กับพื้นและหยุดเร็วขึ้น ยิ่งค่าต่ำ (เช่น 0.1) มันจะ "ลื่น" เหมือนอยู่บนน้ำแข็ง ลองปรับเล่นดู! ค่าดีฟอลต์ (1.0) ก็โอเคแล้ว
Bounce: คือค่าการเด้ง ถ้าตั้งเป็น 0 มันจะชนแล้วหยุด ถ้าตั้งเป็น 0.5 มันจะเด้งกลับมาด้วยความแรงครึ่งหนึ่ง ลองปรับเป็นซัก 0.2 เพื่อให้ตอนชนกำแพงมันมีการเด้งดึ๋งนิดๆ
กล้องที่ต้องตามติด:
ตอนนี้ถ้าแกกด Play ลูกบอลจะกลิ้งไป แต่มุมกล้องจะอยู่ที่เดิม เราต้องทำให้กล้องตามผู้เล่น
วิธีที่ง่ายและดีที่สุด: ในซีน Main.tscn คลิกที่โหนด Camera3D แล้ว ลากมันไปเป็นโหนดลูกของ Player เลย!
Player (RigidBody3D)
MeshInstance3D
CollisionShape3D
Camera3D
จัดตำแหน่งกล้องใหม่ให้อยู่ข้างหลังและสูงกว่าลูกบอลนิดหน่อย ทีนี้พอลูกบอลกลิ้งไปไหน กล้องก็จะตามไปด้วยตลอดเวลา
การบ้านจากพี่ชาย (รอบ Hamsterball)
กด F5 แล้วลองเล่นดู! แกจะได้ฟีลลิ่งที่แตกต่างจากเดิมโดยสิ้นเชิง
หน้าที่ของแกคือ "ค้นหาฟีลลิ่งของ Hamsterball":
move_torque ที่ 20 มันแรงไปไหม? หรือเบาไป? ลองปรับเป็น 10, 30, 50 ดูว่าค่าไหนที่ทำให้รู้สึกว่า "เรากำลังดันลูกบอลที่มีน้ำหนักพอดีๆ"
max_angular_velocity ที่ 20 มันโอเครึยัง? ลองลดเหลือ 10 ดูสิ มันจะรู้สึกอืดอาดไปไหม? ถ้าเพิ่มเป็น 40 ล่ะ คุมอยู่รึเปล่า?
ไปปรับค่า Friction ใน PhysicsMaterial ดู ลองตั้งเป็น 0.1 แล้วแกจะเข้าใจฟีลของด่านน้ำแข็งเลย
ไปปรับค่า Bounce เป็น 0.5 แล้วลองกลิ้งชนกำแพงดู มันจะเด้งเหมือนลูกพินบอลเลย
นี่แหละน้องรัก... เราเข้าใกล้ "ความทรงจำ" ของเราแล้ว การควบคุมแบบนี้มันมีเสน่ห์ มีความท้าทายในตัวมันเอง และเปิดโอกาสให้เราออกแบบด่านที่สนุกๆ ได้อีกเพียบเลย เช่น ทางลาด, แท่นกระโดด, พื้นลื่นๆ
ไปลองจูนดู แล้วกลับมาบอกพี่ว่า "สูตรลับ" ของแฮมสเตอร์บอลฉบับแกคือค่าอะไรบ้าง
